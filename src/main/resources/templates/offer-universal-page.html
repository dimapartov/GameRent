<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Объявления</title>
</head>
<body>
<div th:replace="~{fragments/navbar :: navbar}"></div>
<main>
    <h2>Объявления</h2>
    <!-- Форма фильтрации -->
    <form th:action="@{/offer/universal}" method="get">
        <div>
            <label>Цена от:</label>
            <input type="number" step="0.01" name="priceFrom" th:value="${param.priceFrom}"/>
            <label>до:</label>
            <input type="number" step="0.01" name="priceTo" th:value="${param.priceTo}"/>
        </div>
        <div>
            <label>Бренд:</label>
            <select name="brand">
                <option value="">-- Все бренды --</option>
                <option th:each="b : ${allBrands}"
                        th:value="${b.name}"
                        th:text="${b.name}"
                        th:selected="${b.name == param.brand}">
                </option>
            </select>
        </div>
        <div>
            <label>
                <input type="checkbox" name="myOffers" value="true"
                       th:checked="${param.myOffers == 'true'}"/> Мои объявления
            </label>
        </div>
        <button type="submit">Применить фильтры</button>
    </form>

    <!-- Вывод списка офферов -->
    <div style="display: flex; flex-wrap: wrap; gap: 20px; margin-top: 20px;">
        <div th:each="o : ${offers}" style="border: 1px solid #ccc; padding: 10px; width: 250px;">
            <img th:src="@{'/images/' + ${o.photo}}" alt="Offer Image" style="max-width: 100%; height: auto;">
            <h3 th:text="${o.brand.name + ' ' + o.gameName}">Offer Name</h3>
            <p>
                <strong>Цена:</strong> <span th:text="${o.price}">Price</span><br/>
                <strong>Статус:</strong> <span th:text="${o.status}">Status</span><br/>
                <strong>Описание:</strong> <span th:text="${o.description}">Description</span><br/>
                <strong>Владелец:</strong> <span th:text="${o.owner}">Owner</span>
            </p>
        </div>
    </div>
</main>
</body>
</html>